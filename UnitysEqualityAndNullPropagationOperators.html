<!DOCTYPE html>
<html lang="en">

  <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <!-- Begin Jekyll SEO tag v2.8.0 -->
<title>Mastering C# Operators in Unity ?., ??, == | cxyda.github.io</title>
<meta name="generator" content="Jekyll v4.3.4" />
<meta property="og:title" content="Mastering C# Operators in Unity ?., ??, ==" />
<meta name="author" content="Daniel SteegmÃ¼ller" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="C# is a powerhouse language âš¡, offering an array of features like syntactic sugar and expressive tools that make your code concise, readable, and functional. Among these gems are the ?., ??, and == operatorsâ€”designed to handle nullability, default values, and equality with elegance. âœ¨" />
<meta property="og:description" content="C# is a powerhouse language âš¡, offering an array of features like syntactic sugar and expressive tools that make your code concise, readable, and functional. Among these gems are the ?., ??, and == operatorsâ€”designed to handle nullability, default values, and equality with elegance. âœ¨" />
<link rel="canonical" href="https://cxyda.github.io/UnitysEqualityAndNullPropagationOperators" />
<meta property="og:url" content="https://cxyda.github.io/UnitysEqualityAndNullPropagationOperators" />
<meta property="og:site_name" content="cxyda.github.io" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2024-11-14T00:00:00+05:30" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Mastering C# Operators in Unity ?., ??, ==" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"Daniel SteegmÃ¼ller"},"dateModified":"2024-11-17T21:27:05+05:30","datePublished":"2024-11-14T00:00:00+05:30","description":"C# is a powerhouse language âš¡, offering an array of features like syntactic sugar and expressive tools that make your code concise, readable, and functional. Among these gems are the ?., ??, and == operatorsâ€”designed to handle nullability, default values, and equality with elegance. âœ¨","headline":"Mastering C# Operators in Unity ?., ??, ==","mainEntityOfPage":{"@type":"WebPage","@id":"https://cxyda.github.io/UnitysEqualityAndNullPropagationOperators"},"url":"https://cxyda.github.io/UnitysEqualityAndNullPropagationOperators"}</script>
<!-- End Jekyll SEO tag -->


  <!-- CSS -->
  <link rel="stylesheet" href="/assets/css/main.css">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Libre+Baskerville:400,400i,700">

  <!-- Favicon -->
  <link rel="icon" type="image/png" sizes="32x32" href="/assets/favicon/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/assets/favicon/favicon-16x16.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/assets/favicon/apple-touch-icon.png">

  <!-- RSS -->
  <link type="application/atom+xml" rel="alternate" href="https://cxyda.github.io/feed.xml" title="cxyda.github.io" />

  <!-- Google Analytics-->
  
</head>

  <head>
    <!-- Add the third-party Gist styling library -->
    <link rel="stylesheet" href="assets\css\dark-gist-theme.css">
  </head>
  <body>

    <nav class="nav">
  <div class="nav-container">
    <a href="/">
      <h2 class="nav-title">cxyda.github.io</h2>
    </a>
    <ul>
      <li><a href="/">Posts</a></li>
      <li><a href="/tags">Tags</a></li>
      <li><a href="/about">About</a></li>
    </ul>
  </div>
</nav>


    <main>
      <div class="post">
  <div class="post-info">
    <span>Written by</span>
    
        Daniel SteegmÃ¼ller
    

    
      <br>
      <span>on&nbsp;</span><time datetime="2024-11-14 00:00:00 +0530">November 14, 2024</time>
      <span> and last updated on&nbsp;</span><time datetime="2024-11-14">November 14, 2024</time>    
    
  </div>

  <h1 class="post-title">Mastering C# Operators in Unity ?., ??, ==</h1>
  <div class="post-line"></div>

  <p>C# is a powerhouse language âš¡, offering an array of features like <strong>syntactic sugar</strong> and expressive tools that make your code concise, readable, and functional. Among these gems are the <strong><code class="language-plaintext highlighter-rouge">?.</code></strong>, <strong><code class="language-plaintext highlighter-rouge">??</code></strong>, and <strong><code class="language-plaintext highlighter-rouge">==</code></strong> operatorsâ€”designed to handle nullability, default values, and equality with elegance. âœ¨</p>

<p>But hereâ€™s the twist: when Unity enters the chat, things getâ€¦ <em>interesting</em>. ğŸ˜… Unityâ€™s handling of <code class="language-plaintext highlighter-rouge">UnityEngine.Object</code> derivatives (GameObjects, MonoBehaviours, ScriptableObjects, etc.) adds unique nuancesâ€”and even potential pitfallsâ€”to these operatorsâ€™ behavior. This post dives into their quirks, benefits, and challenges in Unityâ€™s world. ğŸ› ï¸</p>

<hr />

<h2 id="the--operator-equality-in-c-vs-unity"><strong>The <code class="language-plaintext highlighter-rouge">==</code> Operator: Equality in C# vs. Unity</strong></h2>

<p>In standard C#, the <code class="language-plaintext highlighter-rouge">==</code> operator checks for <strong>value equality</strong> in value types and <strong>reference equality</strong> in reference types. Sounds simple, right? Not so fast! ğŸ›‘ Unity overrides this operator for objects derived from <code class="language-plaintext highlighter-rouge">UnityEngine.Object</code>. While this adds developer-friendly â€œquality of lifeâ€ features ğŸ›¡ï¸, it can also lead to surprising results.</p>

<hr />

<h3 id="unitys-take-on-"><strong>Unityâ€™s Take on <code class="language-plaintext highlighter-rouge">==</code></strong></h3>

<p>Letâ€™s unravel the mystery with some code:</p>

<noscript><pre>400: Invalid request</pre></noscript>
<script src="https://gist.github.com/67224a2fe58e9f387943c50e06a5f9b0.js"> </script>

<p>As the code shows, things getâ€¦ <em>weird</em> in the <code class="language-plaintext highlighter-rouge">Update()</code> method. By overriding the <code class="language-plaintext highlighter-rouge">==</code> operator, Unity shields you from common mistakes. ğŸ™Œ</p>

<p>Hereâ€™s what happens:</p>
<ul>
  <li>At the start of the frame, the object is marked for destruction.</li>
  <li>The underlying C# object isnâ€™t technically <code class="language-plaintext highlighter-rouge">null</code> yetâ€”the garbage collector hasnâ€™t cleaned it up.</li>
  <li>Unity steps in and pretends the object is null when you try to access it, ensuring that your code doesnâ€™t crash.</li>
</ul>

<p>ğŸ’¡ <strong>TL;DR</strong>: Unityâ€™s <code class="language-plaintext highlighter-rouge">==</code> operator checks if the object is accessible rather than strictly null, making life easier for developers. Good job, Unity! ğŸ‘</p>

<p>Butâ€¦ what happens when â€˜newerâ€™ (introduced in 2015) C# features like <code class="language-plaintext highlighter-rouge">?.</code> and <code class="language-plaintext highlighter-rouge">??</code> enter the equation? These operators canâ€™t be overridden, and therein lies the chaos. ğŸŒ€</p>

<hr />

<h2 id="the--operator-null-conditional-access"><strong>The <code class="language-plaintext highlighter-rouge">?.</code> Operator: Null-Conditional Access</strong></h2>

<p>The <code class="language-plaintext highlighter-rouge">?.</code> operator is a C# favorite for null-safe access. It allows you to call methods or properties <strong>only if the left-hand object isnâ€™t null</strong>. Otherwise, it short-circuits and returns <code class="language-plaintext highlighter-rouge">null</code>â€”no exceptions, no drama. ğŸ­</p>

<p>But waitâ€¦ Unity doesnâ€™t play by the same rules here. ğŸ˜¬</p>

<hr />

<h3 id="standard-c-example"><strong>Standard C# Example</strong></h3>

<noscript><pre>400: Invalid request</pre></noscript>
<script src="https://gist.github.com/54fe7a3da4e3d95f301a3fd43f37eb13.js?file=example.cs"> </script>

<p>This operator shines when dealing with nullable or optional objects in vanilla C#. It keeps your code clean and crash-free. ğŸš¿</p>

<hr />

<h3 id="the--operator-in-unity"><strong>The <code class="language-plaintext highlighter-rouge">?.</code> Operator in Unity</strong></h3>

<p>In Unity, the null-conditional operator becomes a little tricky:</p>

<noscript><pre>400: Invalid request</pre></noscript>
<script src="https://gist.github.com/06591e1418084be30b8356183d0ff571.js?file=example.cs"> </script>

<p>In the <code class="language-plaintext highlighter-rouge">Start()</code> method, everything works fine. Unity is happy, and the <code class="language-plaintext highlighter-rouge">?.</code> operator behaves as expected. But in the <strong><code class="language-plaintext highlighter-rouge">Update()</code> method</strong>, all bets are off. ğŸ²</p>

<noscript><pre>400: Invalid request</pre></noscript>
<script src="https://gist.github.com/f2ffe42b7ccfe676b508937da7dd91fe.js"> </script>

<ul>
  <li>If the GameObject was destroyed earlier that frame, Unityâ€™s <code class="language-plaintext highlighter-rouge">==</code> operator would have protected you.</li>
  <li>But the <code class="language-plaintext highlighter-rouge">?.</code> operator <strong>doesnâ€™t respect Unityâ€™s lifecycle magic</strong>, leading to a <code class="language-plaintext highlighter-rouge">MissingReferenceException</code>.</li>
</ul>

<p>Unityâ€™s overridden behavior doesnâ€™t extend to operators it canâ€™t control, making <code class="language-plaintext highlighter-rouge">?.</code> risky for <code class="language-plaintext highlighter-rouge">UnityEngine.Object</code> derivatives. Proceed with caution! ğŸš§</p>

<hr />

<h2 id="the--operator-null-coalescing-awesomeness"><strong>The <code class="language-plaintext highlighter-rouge">??</code> Operator: Null-Coalescing Awesomeness</strong></h2>

<p>The <code class="language-plaintext highlighter-rouge">??</code> operator is a lifesaver for null-checks. It returns the left-hand operand if itâ€™s not null or the right-hand operand otherwise. <strong>Simple, powerful, and concise.</strong> ğŸ’ª</p>

<hr />

<h3 id="standard-c-example-1"><strong>Standard C# Example</strong></h3>

<noscript><pre>400: Invalid request</pre></noscript>
<script src="https://gist.github.com/9057a8a1b63df416c22979b66d9e21f4.js"> </script>

<p>In pure C#, the <code class="language-plaintext highlighter-rouge">??</code> operator is a great way to handle optional values or provide fallbacks with minimal verbosity.</p>

<hr />

<h3 id="the--operator-in-unity-1"><strong>The <code class="language-plaintext highlighter-rouge">??</code> Operator in Unity</strong></h3>

<noscript><pre>400: Invalid request</pre></noscript>
<script src="https://gist.github.com/924684a6ca1b9c83b9927853506fade6.js"> </script>

<p>Here, the <code class="language-plaintext highlighter-rouge">??</code> operator simplifies fallback logic for Unity objects like scripts, components, or optional references. But it has one major caveat:</p>

<ul>
  <li>Like the <code class="language-plaintext highlighter-rouge">?.</code> operator, the <code class="language-plaintext highlighter-rouge">??</code> operator <strong>doesnâ€™t respect Unityâ€™s lifecycle quirks</strong>.</li>
  <li>While itâ€™s less likely to throw immediate exceptions, it can cause subtle bugs if the object was destroyed but not yet cleaned up by the GC.</li>
</ul>

<noscript><pre>400: Invalid request</pre></noscript>
<script src="https://gist.github.com/5cbd59d2b96861b470200b9f377ef3a9.js"> </script>

<p>This contrived case shows how the <code class="language-plaintext highlighter-rouge">??</code> operator could lead to unexpected behavior when working with Unity objects.</p>

<p>ğŸ’¡ <strong>Pro Tip</strong>: Stick to traditional null-checks (<code class="language-plaintext highlighter-rouge">if</code>-<code class="language-plaintext highlighter-rouge">else</code>) for <code class="language-plaintext highlighter-rouge">UnityEngine.Object</code> types to avoid surprises.</p>

<hr />

<h2 id="conclusion-use-with-caution-ï¸"><strong>Conclusion: Use with Caution! âš ï¸</strong></h2>

<p>Operators like <code class="language-plaintext highlighter-rouge">?.</code> and <code class="language-plaintext highlighter-rouge">??</code> are fantastic tools working with regular C# objects, making code cleaner, more concise, and less error-prone. But in Unityâ€™s ecosystem, they can introduce subtle, hard-to-diagnose bugs. ğŸ›</p>

<p>Hereâ€™s the golden rule:</p>
<ul>
  <li><strong>For Unity objects (<code class="language-plaintext highlighter-rouge">UnityEngine.Object</code> derivatives)</strong>: Avoid using <code class="language-plaintext highlighter-rouge">?.</code> and <code class="language-plaintext highlighter-rouge">??</code> operators. Unityâ€™s lifecycle quirks mean these operators might not behave as expected, potentially causing runtime issues.</li>
  <li><strong>For plain C# objects</strong>: Go wild! These operators make your code safer and more elegant. ğŸ‰</li>
</ul>

<p>And remember: if youâ€™re working in a team or using external plugins, avoid patterns that rely on these operators for Unity objects. Not everyone will be aware of the caveats, and bugs might creep in like ninjas. ğŸ¤º</p>

<hr />

<h3 id="references-"><strong>References ğŸ“š</strong></h3>

<ol>
  <li>Microsoft Learn: <a href="https://learn.microsoft.com/en-us/dotnet/csharp/language-reference/operators/">C# Operators Overview</a></li>
  <li>Rider resharper-unity: <a href="https://github.com/JetBrains/resharper-unity/wiki/Possible-unintended-bypass-of-lifetime-check-of-underlying-Unity-engine-object">Unintended Bypass Of Lifetime</a></li>
  <li>Unity Blog: <a href="https://unity.com/blog/engine-platform/custom-operator-should-we-keep-it">Custom == operator, should we keep it?</a></li>
</ol>

<p>Got war stories or lessons learned about using these operators in Unity? Share them in the commentsâ€”letâ€™s learn and laugh together! ğŸ˜„</p>

</div>



<div class="pagination">
  
    <a href="/UnderstandingStructsAndClassesInCSharp" class="left arrow">&#8592;</a>
  
  

  <a href="#" class="top">Top</a>
</div>
    </main>

    <footer>
  <span>
    &copy; <time datetime="2024-11-18 01:57:47 +0530">2024</time> Daniel SteegmÃ¼ller. Made with Jekyll using the <a href="https://github.com/jitinnair1/tail">Tail</a> theme.
  </span>
</footer>


  </body>
</html>
